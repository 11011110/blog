---
layout: post
title:  'Median graphs and binary majorization'
date:   2008-04-27 01:18:00
tags:   [media theory, wikipedia, number theory]
---
<p>I received my copy of Knuth&#x27;s <i>Art of Computer Programming</i>, Volume 4, Fascicle 0, this week. It contains a long section on median graphs, and coincidentally I had just added a long <a href="http://en.wikipedia.org/wiki/Median_graph">article on median graphs</a> to Wikipedia, so I&#x27;ve been reading that part with great interest.</p>

<p>One of the exercises, 7.1.1 ex.109, caught my attention. In it, Knuth describes the &quot;binary majorization lattice&quot; in which the elements are the <i>n</i>-bit binary numbers and in which <i>x</i> is greater than <i>y</i> if <i>x</i> has at least as many nonzeros as <i>y</i> with <i>x</i>&#x27;s highest order nonzero bit larger than <i>y</i>&#x27;s, <i>x</i>&#x27;s second highest nonzero bit larger than <i>y</i>&#x27;s, and so on. Here it is as drawn by <a href="http://arxiv.org/abs/cs.DS/0406020">my algorithm for drawing graphs that can be embedded on an integer grid</a> — here the integer grid turns out to be three dimensional, and the awkward folds in the drawing are there because my algorithm doesn&#x27;t know any better than to put them in.</p>

<p style="text-align:center"><img src="http://www.ics.uci.edu/~eppstein/0xDE/majlat.png" /></p>

<p>Knuth asks several questions about this lattice, that all become much simpler if one sees its hidden structure: it is really not about binary numbers, but about <a href="http://en.wikipedia.org/wiki/Lower_set">lower sets</a> in grids, quite like the ones <a href="http://11011110.livejournal.com/113760.html">counted by Pascal&#x27;s triangle</a> but for a triangular grid instead of a rectangular grid. Specifically, this grid:</p>

<p style="text-align:center"><img src="http://www.ics.uci.edu/~eppstein/0xDE/majlatops.png" /></p>

<p>As shown in the illustration, each node of the grid is labeled with a Boolean operation on a number <i>x</i>, either setting its lowest order bit to one or flipping two consecutive bits. If you&#x27;re a mathematician rather than a programmer, the &quot;^=&quot; operation replaces <i>x</i> by its bitwise exclusive or with the right hand side. Each possible binary number may be formed by choosing a downward-closed subset of this grid, initializing <i>x</i> to zero, and then applying the operations within that subset. If you perform the operations in bottom-up order you&#x27;ll get a sequence of increasingly-majorized numbers ending with the one you want, following a path in the graph of the majorization lattice, but because they&#x27;re just xors you can do the operations in any other order and end up with the same result. With this construction, the majorization order of the binary numbers is exactly the inclusion ordering of downward closed subsets. By <a href="http://en.wikipedia.org/wiki/Distributive_lattice">Birkhoff&#x27;s theorem that downward closed sets in any partial order form a distributive lattice (and vice versa)</a>, the binary majorization lattice is a distributive lattice (part (d) of the exercise). The greatest lower bounds and least upper bounds in the binary majorization lattices become intersections and unions of downward closed sets (parts b and c). The complement of any number may be formed by the same sequence of operations starting from 2<sup><i>n</i></sup>−1 instead of starting from zero; the lattice structure is completely unaffected by this different starting point (part a).</p>

<p>In media theoretic terms, we&#x27;re analyzing the structure of a partial cube (the graph of the majorization lattice) in terms of the operations used to get from one vertex to another (the xor operations listed in the grid above). The grid contains many operations that look the same as each other in terms of their effects on the binary numbers they operate on, but must be treated differently from each other in axiomatizing this structure as a medium: going from 3 to 5 and from 11 to 13 both involve the same binary operation (xor by 6) but in the first case the xor is shifting the highest order nonzero bit while in the second case it&#x27;s shifting the second highest order bit, corresponding to the bottom and second-from-bottom xor-by-6 operations in the grid above. As a medium, the binary majorization lattice has pairs of tokens corresponding to each grid node.</p>

<p>Knuth doesn&#x27;t bother to mention it within the exercise, and it&#x27;s not set contiguously with the other exercises on median graphs, but: since Birkhoff and Kiss (1947) proved that the graph of any distributive lattice is a median graph, so is the graph of the binary majorization lattice. The median of any three binary numbers <i>x</i>, <i>y</i>, and <i>z</i> has the median number of nonzeros of the three numbers, the highest order nonzero bit is at the median position of the highest order nonzero bits of <i>x</i>, <i>y</i>, and <i>z</i>, the second highest nonzero bit is at the median position of the second highest nonzero bits of <i>x</i>, <i>y</i>, and <i>z</i>, and so on. In terms of the downward closed grid subsets used to represent <i>x</i>, <i>y</i>, and <i>z</i>, the median is formed by letting these three subsets perform a majority vote on which operations to include.</p>
